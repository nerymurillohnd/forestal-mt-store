---
/**
 * HOME PAGE — Botanical Field Journal
 *
 * Full custom landing page. MDX content feeds visual sections,
 * NOT rendered as prose. Each section is a designed experience.
 */
import BaseLayout from "../layouts/BaseLayout.astro";
import Head from "../components/Head.astro";
import Hero from "../components/Hero.astro";
import SectionHeader from "../components/SectionHeader.astro";
import GoldTopCard from "../components/GoldTopCard.astro";
import TrustMarquee from "../components/TrustMarquee.astro";
import OriginPulseIsland from "../components/islands/OriginPulseIsland.tsx";
import { getEntry } from "astro:content";
import { getStreamPoster } from "../data/stream-videos";

const page = await getEntry("pages", "/");
if (!page) throw new Error("Missing content: pages/home");
const { data } = page;

const heroPosterSrc =
  data.hero.background?.type === "video"
    ? getStreamPoster(data.hero.background.stream, 1920, 1080)
    : null;

/* ── Section data extracted from MDX content ──────────────────── */

const collections = [
  {
    title: "Batana Oil",
    eyebrow: "Ancestral Miskito Elixir",
    tag: "Pure & Unrefined",
    description:
      "The miracle oil from La Mosquitia. For generations, the Miskito people have relied on batana oil to nourish hair and restore skin — a living tradition now available worldwide.",
    href: "/batana-oil/",
    image: "https://cdn.forestal-mt.com/pages/home/batana-oil.jpg",
  },
  {
    title: "Stingless Bee Honey",
    eyebrow: "The Maya Heritage",
    tag: "Raw & Traditional",
    description:
      "Rare honey harvested from native Meliponini bees deep in the Honduran rainforest. Prized for centuries for its medicinal properties and delicate, complex flavor.",
    href: "/stingless-bee-honey/",
    image: "https://cdn.forestal-mt.com/pages/home/stinglee-bee-honey-jimerito.jpg",
  },
  {
    title: "Traditional Herbs",
    eyebrow: "Sacred Wisdom Rooted in Nature",
    tag: "Wildcrafted & Shade-Dried",
    description:
      "41 wildcrafted botanical varieties from Honduran cloud forests, lowland jungles, and coastal areas. Shade-dried to preserve essential oils and active compounds.",
    href: "/traditional-herbs/",
    image: "https://cdn.forestal-mt.com/pages/home/traditional-wild-herbs.jpg",
  },
];

const commitments = [
  {
    title: "Quality Guaranteed",
    description:
      "Every product carefully harvested, processed, and packaged to preserve its natural properties. From wildcrafted herbs to cold-pressed oils — no shortcuts, no adulterants.",
  },
  {
    title: "Community Impact",
    description:
      "Your purchase directly supports rural and indigenous communities across Honduras. Fair wages, sustainable livelihoods, and the preservation of traditional knowledge.",
  },
  {
    title: "Sustainable Practices",
    description:
      "Responsible harvesting that protects natural resources for future generations. Guided by the same principles the Miskito and Maya have followed for centuries.",
  },
];
---

<BaseLayout>
  <Head
    slot="head"
    title={data.title}
    description={data.description}
    canonicalUrl={data.canonicalUrl}
    pageName={data.pageName}
    og={data.og}
    twitter={data.twitter}
    schemas={data.schemas}
    preloadHints={heroPosterSrc ? [{ href: heroPosterSrc, as: "image" }] : []}
  />

  {
    /* ═══════════════════════════════════════════════════════════════
      HERO — Full viewport cinematic component
  ═══════════════════════════════════════════════════════════════ */
  }
  <Hero
    background={data.hero.background}
    eyebrow={data.hero.eyebrow}
    title={data.hero.title}
    description={data.hero.description}
    ctas={data.hero.ctas}
    scrollIndicator={true}
  />

  {/* ── Trust marquee after hero ── */}
  <TrustMarquee />

  {
    /* ═══════════════════════════════════════════════════════════════
      COLLECTIONS — Bento grid editorial cards
  ═══════════════════════════════════════════════════════════════ */
  }
  <section class="surface-warm relative py-28">
    <div class="mx-auto max-w-7xl px-6 lg:px-12">
      <SectionHeader eyebrow="Our Collections" heading="Three Traditions, One Origin" />

      {/* Bento grid: first card spans 2 rows on large screens */}
      <div
        class="reveal-on-scroll mt-20 grid grid-cols-1 gap-4 lg:grid-cols-[1.3fr_1fr] lg:grid-rows-[1fr_1fr]"
      >
        {
          collections.map((col, i) => (
            <a
              href={col.href}
              class:list={[
                "group relative flex aspect-[3/4] flex-col justify-end overflow-hidden rounded-[2px] shadow-sm transition-shadow duration-500 hover:shadow-xl",
                i === 0 && "lg:row-span-2 lg:aspect-auto",
              ]}
            >
              <img
                src={col.image}
                alt={col.title}
                class="absolute inset-0 h-full w-full object-cover transition-transform duration-700 ease-out group-hover:scale-[1.03]"
                loading="lazy"
              />
              <div class="absolute inset-0 bg-gradient-to-t from-[#111]/85 via-[#111]/25 to-transparent transition-opacity duration-500" />

              <div class="relative z-10 p-8 pb-10">
                <p class="font-[family-name:var(--font-heading)] text-[9px] font-normal uppercase tracking-[0.35em] text-[#F3C00D]/80">
                  {col.eyebrow}
                </p>
                <h3 class="mt-2.5 font-[family-name:var(--font-display)] text-[1.65rem] leading-tight text-white">
                  {col.title}
                </h3>
                <p class="mt-1 font-[family-name:var(--font-heading)] text-[10px] font-normal uppercase tracking-[0.2em] text-white/50">
                  {col.tag}
                </p>
                <p class="mt-4 max-w-xs font-[family-name:var(--font-body)] text-[13px] leading-relaxed text-white/55 transition-all duration-500 ease-out md:translate-y-3 md:opacity-0 md:group-hover:translate-y-0 md:group-hover:opacity-100">
                  {col.description}
                </p>
                <span class="mt-5 inline-flex items-center gap-1.5 font-[family-name:var(--font-ui)] text-[11px] font-semibold uppercase tracking-[0.15em] text-white/70 transition-all duration-300 group-hover:text-[#F3C00D]">
                  Explore Collection
                  <svg
                    class="h-3 w-3 transition-transform duration-300 group-hover:translate-x-1"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"
                    />
                  </svg>
                </span>
              </div>
            </a>
          ))
        }
      </div>
    </div>
  </section>

  {
    /* ═══════════════════════════════════════════════════════════════
      THE SOURCE — Interactive Honduras map (OriginPulse island)
  ═══════════════════════════════════════════════════════════════ */
  }
  <section class="surface-dark grain relative overflow-hidden py-28">
    <div class="reveal-on-scroll relative z-10 mx-auto max-w-4xl px-6 text-center lg:px-12">
      <p
        class="font-[family-name:var(--font-heading)] text-[11px] font-normal uppercase tracking-[0.35em] text-[#F3C00D]/80"
      >
        Why Forestal MT
      </p>
      <h2
        class="mt-6 font-[family-name:var(--font-display)] text-[clamp(2rem,4.5vw,3.25rem)] font-normal leading-[1.15] text-white"
      >
        We Are the Source.<br />Not a Middleman.
      </h2>
      <hr class="gold-rule" />
      <p
        class="mx-auto mt-8 max-w-2xl font-[family-name:var(--font-body)] text-[15px] leading-[1.85] text-white/55"
      >
        Most suppliers resell from unknown origins. We source directly from indigenous communities
        in Honduras who craft these products using ancestral methods. No brokers. No traders. Full
        traceability from forest to your door.
      </p>
    </div>

    <div class="relative z-10 mx-auto mt-16 max-w-7xl px-6 lg:px-12">
      <OriginPulseIsland client:visible />
    </div>
  </section>

  {
    /* ═══════════════════════════════════════════════════════════════
      OUR STORY — Warm editorial with asymmetric image
  ═══════════════════════════════════════════════════════════════ */
  }
  <section class="py-28" style="background-color: color-mix(in srgb, #E6D8B1 10%, #F8F8F0);">
    <div
      class="mx-auto grid max-w-7xl grid-cols-1 items-center gap-16 px-6 lg:grid-cols-[1fr_1.15fr] lg:px-12"
    >
      {/* Text */}
      <div class="reveal-on-scroll">
        <p
          class="font-[family-name:var(--font-heading)] text-[11px] font-normal uppercase tracking-[0.35em] text-[#A18500]"
        >
          Our Story
        </p>
        <h2
          class="mt-4 font-[family-name:var(--font-display)] text-[clamp(1.75rem,3.5vw,2.75rem)] font-normal text-[#333]"
        >
          From the Heart<br />of Honduras
        </h2>
        <hr class="gold-rule-left" />
        <p
          class="mt-8 font-[family-name:var(--font-body)] text-[15px] leading-[1.85] text-[#333]/70"
        >
          We bring you nature's finest treasures — sustainably harvested and traditionally prepared
          by the communities who have safeguarded them for centuries. From the forests of Olancho to
          La Mosquitia's coastline, every product carries a clear, honest story.
        </p>

        <blockquote class="mt-8 border-l-[2px] border-[#F3C00D]/50 pl-6">
          <p
            class="font-[family-name:var(--font-display)] text-[1.2rem] italic leading-relaxed text-[#333]/80"
          >
            To share the natural treasures of Honduras with the world while supporting local
            communities and preserving traditional knowledge.
          </p>
        </blockquote>

        <a
          href="/about/"
          class="mt-10 inline-flex items-center gap-2 font-[family-name:var(--font-ui)] text-[12px] font-semibold uppercase tracking-[0.15em] text-[#206D03] transition-colors duration-300 hover:text-[#54B006]"
        >
          Learn Our Story
          <svg
            class="h-3.5 w-3.5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path>
          </svg>
        </a>
      </div>

      {/* Image */}
      <div class="parallax-image relative aspect-[4/5] overflow-hidden rounded-[2px]">
        <img
          src="https://cdn.forestal-mt.com/pages/about/hero.jpg"
          alt="Forestal MT team with indigenous partners in Honduran forest"
          class="h-full w-full object-cover"
          loading="lazy"
        />
        <div class="absolute inset-0 rounded-[2px] ring-1 ring-inset ring-[#F3C00D]/10"></div>
      </div>
    </div>
  </section>

  {
    /* ═══════════════════════════════════════════════════════════════
      COMMITMENT — GoldTopCard components with stagger
  ═══════════════════════════════════════════════════════════════ */
  }
  <section class="surface-warm py-28">
    <div class="mx-auto max-w-7xl px-6 lg:px-12">
      <SectionHeader eyebrow="Our Promise" heading="Heritage You Can Verify" />

      <div class="reveal-on-scroll stagger-children mt-20 grid grid-cols-1 gap-6 md:grid-cols-3">
        {commitments.map((item) => <GoldTopCard heading={item.title} body={item.description} />)}
      </div>
    </div>
  </section>

  {/* ── Trust marquee before newsletter ── */}
  <TrustMarquee variant="dark" />

  {
    /* ═══════════════════════════════════════════════════════════════
      NEWSLETTER — Forest green CTA with grain
  ═══════════════════════════════════════════════════════════════ */
  }
  <section class="grain relative overflow-hidden bg-[#206D03] py-24">
    <div class="reveal-on-scroll relative z-10 mx-auto max-w-2xl px-6 text-center">
      <h2
        class="font-[family-name:var(--font-display)] text-[clamp(1.5rem,3vw,2.25rem)] font-normal text-white"
      >
        Stay Connected
      </h2>
      <p class="mt-4 font-[family-name:var(--font-body)] text-[14px] leading-relaxed text-white/65">
        New harvests, limited editions, and stories from the Honduran rainforest — delivered to your
        inbox.
      </p>

      <form class="mt-10 flex flex-col gap-3 sm:flex-row">
        <input
          type="email"
          placeholder="Your email address"
          required
          class="flex-1 rounded-[3px] border border-white/15 bg-white/10 px-5 py-3.5 font-[family-name:var(--font-ui)] text-[13px] text-white placeholder-white/35 outline-none backdrop-blur-sm transition-all focus:border-white/30 focus:bg-white/15"
        />
        <button
          type="submit"
          class="rounded-[3px] bg-[#F3C00D] px-8 py-3.5 font-[family-name:var(--font-ui)] text-[13px] font-semibold text-[#333] transition-all duration-300 hover:bg-[#F3C00D]/90 hover:shadow-lg hover:shadow-[#F3C00D]/20"
        >
          Subscribe
        </button>
      </form>

      <p class="mt-4 font-[family-name:var(--font-ui)] text-[11px] text-white/35">
        No spam. Unsubscribe anytime.
      </p>
    </div>
  </section>
</BaseLayout>
